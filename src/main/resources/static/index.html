<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hospital Management System</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>PR Hospital Management System</h1>
    </header>

    <nav>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="http://localhost:8080/patients/all">Patients</a></li>
            <li><a href="#">Beds</a></li>
            <li><a href="#">Reports</a></li>
            <li><a href="#">Billing</a></li>
        </ul>
    </nav>

    <main>
        <section>
            <h2>Patient Registration</h2>
            <form id="registrationForm" class="form-container" onsubmit="clearForm('registrationForm')">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required><br>

                <label for="address">Address:</label>
                <input type="text" id="address" name="address" required><br>

                <label for="contactNumber">Contact Number:</label>
                <input type="text" id="contactNumber" name="contactNumber" required><br>

                <label for="dateOfAdmit">Date of Admit:</label>
                <input type="date" id="dateOfAdmit" name="dateOfAdmit" required><br>

                <button type="button" id="registerButton" class="button">Register</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 PR Hospital Management System</p>
    </footer>

    <script>
        document.getElementById('registerButton').addEventListener('click', function () {
            // Create a JavaScript object from form data for patient registration
            var patientFormData = {
                name: document.getElementById('name').value,
                address: document.getElementById('address').value,
                contactNumber: document.getElementById('contactNumber').value,
                dateOfAdmit: document.getElementById('dateOfAdmit').value
            };

            // Send a POST request with JSON data for patient registration
            fetch('/patients/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(patientFormData)
            })
            .then(response => response.json())
            .then(data => {
                // Handle the response for patient registration
                console.log(data);
                alert('Patient registered successfully');
                
                // Clear the patient registration form fields
                clearForm('registrationForm');
            })
            .catch(error => {
                // Handle errors for patient registration
                console.error(error);
                alert('An error occurred while registering the patient');
            });
        });

        function clearForm(formId) {
            // Clear the specified form fields
            document.getElementById(formId).reset();
        }
    </script>
</body>
</html>
